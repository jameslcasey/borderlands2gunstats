$(document).ready(function(){$("#gunlist").DataTable();$("#damage").on("blur",function(){var t=$(this).val(),i=t.split("*"),r=i.length,u=1,n;if(r>1){for(n=0;n<r;n++)u*=i[n];$(this).val(u)}else $(this).val(t)});var n=$("#searchResults");$("#gunname").on("keyup",function(){n.empty();var t=$(this).val();$.get("GunNameSearch?ss="+t,function(t){for(var r=$.parseJSON(t),i=0;i<r.length;i++)n.append("<div class='row'> <div class='col-md-1'>"+r[i].Level+"<\/div> <div class='col-md-4'>"+r[i].Name+"<\/div> <div class='col-md-2'>"+r[i].DamageOnTarget+"<\/div> <div class='col-md-2'>"+r[i].AllTypesDamageOnTargetRank+"<\/div> <\/div>")})});$("#damage, #accuracy,  #firerate, #reloadspeed, #magazinesize, #elementalDamagePerSecond, #chance").on("keyup",function(){var n=$("#damage").val(),t=$("#accuracy").val(),i=$("#firerate").val(),r=$("#reloadspeed").val(),u=$("#magazinesize").val(),f=$("#elementalDamagePerSecond").val(),e=$("#chance").val();n.length>0&t.length>0&i.length>0&r.length>0&u.length>0&&$.get("/Guns/GunCalcs?damage="+n+"&accuracy="+t+"&firerate="+i+"&reloadspeed="+r+"&magazinesize="+u+"&elementalDamagePerSecond="+f+"&chance="+e,function(n){var t=$.parseJSON(n);$("#damageTimesFireRate").val(t.DamageTimesFireRate);$("#damageTimesFireRateTimesMagazineSize").val(t.DamageTimesFireRateTimesMagazineSize);$("#damageTimesFireRateTimesMagazineSizePerReloadSpeed").val(t.DamageTimesFireRateTimesMagazineSizePerReloadSpeed);$("#damageOnTarget").val(Number(t.DamageOnTarget).toLocaleString());$("#elementalDamagePerSecondTimesChance").val(t.ElementalDamagePerSecondTimesChance);$("#elementalDamageOnTargetTimesDamagePerSecondTimesChance").val(Number(t.ElementalDamageOnTargetTimesDamagePerSecondTimesChance).toLocaleString())})});$("#damage, #accuracy,  #firerate, #reloadspeed, #magazinesize").on("blur",function(){var n=$(this),r=n.prop("id"),t=n.val(),i=$("#guntype").val(),u=n.parent().find("[data-role=rankall]"),f=n.parent().find("[data-role=ranktype]");i.length>0&t.length>0&&$.get("/Guns/MetricRank?metric="+r+"&value="+t+"&type="+i,function(n){var t=$.parseJSON(n);console.log(t);u.text("["+t[0].allrank+"/"+t[0].allrankcount+"]");f.text("["+t[0].typerank+"/"+t[0].typerankcount+"]")})})});